<!DOCTYPE html>
<html>
<head>
    <title>瀏覽器控制台檢查</title>
    <style>body { background: #000; color: white; font-family: Arial; padding: 20px; }</style>
</head>
<body>
    <h1>🔍 瀏覽器控制台檢查</h1>
    <p>請打開開發者工具 (F12) 並查看控制台是否有錯誤</p>
    
    <div style="border: 1px solid #333; padding: 20px; margin: 20px 0; height: 220px;">
        <h3>TradingView 小工具測試</h3>
        
        <!-- TradingView Widget BEGIN -->
        <div class="tradingview-widget-container">
            <div class="tradingview-widget-container__widget"></div>
        </div>
        <script type="text/javascript" src="https://s3.tradingview.com/external-embedding/embed-widget-mini-symbol-overview.js" async>
        {
          "symbol": "BINANCE:BTCUSDT",
          "width": "100%",
          "height": "200",
          "locale": "en",
          "dateRange": "12M",
          "colorTheme": "dark",
          "isTransparent": false,
          "autosize": false,
          "largeChartUrl": ""
        }
        </script>
        <!-- TradingView Widget END -->
    </div>
    
    <script>
        console.log('=== 瀏覽器控制台檢查開始 ===');
        console.log('時間:', new Date().toLocaleString());
        console.log('用戶代理:', navigator.userAgent);
        console.log('頁面 URL:', window.location.href);
        
        // 檢查是否有 CSP 錯誤
        document.addEventListener('securitypolicyviolation', function(e) {
            console.error('🚨 CSP 違規:', {
                directive: e.violatedDirective,
                blockedURI: e.blockedURI,
                originalPolicy: e.originalPolicy
            });
        });
        
        // 檢查腳本載入錯誤
        window.addEventListener('error', function(e) {
            console.error('🚨 腳本錯誤:', {
                message: e.message,
                filename: e.filename,
                lineno: e.lineno,
                colno: e.colno
            });
        });
        
        // 檢查 Promise 錯誤
        window.addEventListener('unhandledrejection', function(e) {
            console.error('🚨 Promise 錯誤:', e.reason);
        });
        
        // 檢查小工具載入狀態
        setTimeout(() => {
            const widget = document.querySelector('.tradingview-widget-container__widget');
            console.log('小工具容器:', widget);
            console.log('小工具內容:', widget ? widget.innerHTML : '無');
            console.log('是否有子元素:', widget ? widget.hasChildNodes() : false);
        }, 3000);
        
        setTimeout(() => {
            const widget = document.querySelector('.tradingview-widget-container__widget');
            console.log('5秒後檢查 - 小工具內容:', widget ? widget.innerHTML.substring(0, 200) : '無');
        }, 5000);
        
        console.log('=== 檢查腳本設定完成 ===');
    </script>
</body>
</html>