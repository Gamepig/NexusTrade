<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TradingView Widget æ¸¬è©¦ - NexusTrade</title>
    <style>
        body {
            font-family: 'Segoe UI', system-ui, sans-serif;
            margin: 20px;
            background: #1a1a1a;
            color: #ffffff;
        }
        .test-container {
            max-width: 1000px;
            margin: 0 auto;
            padding: 20px;
            background: #2a2a2a;
            border-radius: 12px;
        }
        .widget-list {
            display: grid;
            gap: 15px;
            margin-top: 20px;
        }
        .widget-item {
            padding: 15px;
            background: #333;
            border-radius: 8px;
            border-left: 4px solid #00d4aa;
        }
        .widget-name {
            font-weight: 600;
            color: #00d4aa;
            margin-bottom: 5px;
        }
        .widget-desc {
            font-size: 14px;
            color: #b0b0b0;
            margin-bottom: 10px;
        }
        .test-links {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }
        .test-link {
            padding: 6px 12px;
            background: #00d4aa;
            color: white;
            text-decoration: none;
            border-radius: 4px;
            font-size: 13px;
            transition: background 0.3s;
        }
        .test-link:hover {
            background: #00b894;
        }
        .status {
            margin-top: 20px;
            padding: 15px;
            background: #1e1e1e;
            border-radius: 8px;
        }
        .debug-info {
            font-family: monospace;
            font-size: 12px;
            color: #888;
        }
    </style>
</head>
<body>
    <div class="test-container">
        <h1>ğŸ“Š TradingView Widget å®Œæ•´æ¸¬è©¦</h1>
        <p>æ¸¬è©¦å–®ä¸€è²¨å¹£è©³æƒ…é é¢çš„ 7 å€‹ TradingView Widget</p>
        
        <div class="widget-list">
            <div class="widget-item">
                <div class="widget-name">1. Symbol Info Widget</div>
                <div class="widget-desc">é ‚éƒ¨åŸºæœ¬è³‡è¨Šå±•ç¤º - å³æ™‚åƒ¹æ ¼ã€24hè®ŠåŒ–ã€åŸºæœ¬çµ±è¨ˆ</div>
                <div class="test-links">
                    <a href="http://localhost:3000/#/currency/BTCUSDT" class="test-link" target="_blank">æ¸¬è©¦ BTC</a>
                    <a href="http://localhost:3000/#/currency/ETHUSDT" class="test-link" target="_blank">æ¸¬è©¦ ETH</a>
                </div>
            </div>

            <div class="widget-item">
                <div class="widget-name">2. Advanced Chart Widget</div>
                <div class="widget-desc">ä¸»è¦åœ–è¡¨å€åŸŸ - å®Œæ•´æŠ€è¡“åˆ†æåœ–è¡¨ã€å¤šæ™‚é–“æ¡†æ¶</div>
                <div class="test-links">
                    <a href="http://localhost:3000/#/currency/BTCUSDT" class="test-link" target="_blank">æ¸¬è©¦é€²éšåœ–è¡¨</a>
                </div>
            </div>

            <div class="widget-item">
                <div class="widget-name">3. Company Profile Widget</div>
                <div class="widget-desc">è²¨å¹£èƒŒæ™¯è³‡è¨Š - åŠ å¯†è²¨å¹£ç°¡ä»‹ã€é—œéµæ•¸æ“š</div>
                <div class="test-links">
                    <a href="http://localhost:3000/#/currency/BNBUSDT" class="test-link" target="_blank">æ¸¬è©¦ BNB è³‡è¨Š</a>
                </div>
            </div>

            <div class="widget-item">
                <div class="widget-name">4. Technical Analysis Widget</div>
                <div class="widget-desc">æŠ€è¡“åˆ†æä¿¡è™Ÿ - è‡ªå‹•åŒ–äº¤æ˜“ä¿¡è™Ÿå’ŒæŠ€è¡“æŒ‡æ¨™ç¸½çµ</div>
                <div class="test-links">
                    <a href="http://localhost:3000/#/currency/ETHUSDT" class="test-link" target="_blank">æ¸¬è©¦æŠ€è¡“åˆ†æ</a>
                </div>
            </div>

            <div class="widget-item">
                <div class="widget-name">5. Top Stories Widget</div>
                <div class="widget-desc">ç›¸é—œæ–°è - å¸‚å ´æƒ…ç·’åˆ†æå’Œç›¸é—œæ–°èå‹•æ…‹</div>
                <div class="test-links">
                    <a href="http://localhost:3000/#/currency/BTCUSDT" class="test-link" target="_blank">æ¸¬è©¦æ–°è</a>
                </div>
            </div>

            <div class="widget-item">
                <div class="widget-name">6. Crypto Coins Heatmap Widget</div>
                <div class="widget-desc">å¸‚å ´æ¦‚è¦½ - æ•´é«”åŠ å¯†è²¨å¹£å¸‚å ´è¡¨ç¾è¦–è¦ºåŒ–ç†±åŠ›åœ–</div>
                <div class="test-links">
                    <a href="http://localhost:3000/#/currency/ADAUSDT" class="test-link" target="_blank">æ¸¬è©¦ç†±åŠ›åœ–</a>
                </div>
            </div>

            <div class="widget-item">
                <div class="widget-name">7. Cryptocurrency Market Widget</div>
                <div class="widget-desc">å¸‚å ´æ’è¡Œ - å‰ 10 å¤§åŠ å¯†è²¨å¹£æ¯”è¼ƒæ•¸æ“šå’Œæ’è¡Œæ¦œ</div>
                <div class="test-links">
                    <a href="http://localhost:3000/#/currency/SOLUSDT" class="test-link" target="_blank">æ¸¬è©¦æ’è¡Œæ¦œ</a>
                </div>
            </div>
        </div>

        <div class="status">
            <h3>æ¸¬è©¦ç‹€æ…‹ï¼š</h3>
            <div id="test-results" class="debug-info">æº–å‚™é–‹å§‹æ¸¬è©¦...</div>
        </div>

        <div class="status">
            <h3>Widget é…ç½®è³‡è¨Šï¼š</h3>
            <div class="debug-info">
                â€¢ æ‰€æœ‰ Widget ä½¿ç”¨ç¹é«”ä¸­æ–‡ (locale: "zh_TW")<br>
                â€¢ çµ±ä¸€æ·±è‰²ä¸»é¡Œ (colorTheme: "dark")<br>
                â€¢ å°ç£æ™‚å€è¨­å®š (timezone: "Asia/Taipei")<br>
                â€¢ éŸ¿æ‡‰å¼è¨­è¨ˆæ”¯æ´ (autosize: true)<br>
                â€¢ ç¾ä»£åŒ–åµŒå…¥æ–¹å¼ (è…³æœ¬æ¨™ç±¤ + JSON é…ç½®)
            </div>
        </div>
    </div>

    <script>
        function updateTestResults() {
            const results = document.getElementById('test-results');
            results.innerHTML = 'ğŸ” æª¢æŸ¥ç³»çµ±ç‹€æ…‹:<br>';
            
            // æª¢æŸ¥åŸºæœ¬æœå‹™
            fetch('http://localhost:3000/api/market/symbols')
                .then(response => {
                    if (response.ok) {
                        results.innerHTML += 'âœ… å¾Œç«¯ API æœå‹™æ­£å¸¸<br>';
                        
                        // æª¢æŸ¥ TradingView è³‡æº
                        return fetch('https://s3.tradingview.com/external-embedding/embed-widget-advanced-chart.js');
                    } else {
                        throw new Error('API æœå‹™ç•°å¸¸');
                    }
                })
                .then(response => {
                    if (response.ok) {
                        results.innerHTML += 'âœ… TradingView å¤–éƒ¨è³‡æºå¯è¨ªå•<br>';
                        results.innerHTML += 'âœ… æ‰€æœ‰ç³»çµ±æº–å‚™å°±ç·’<br>';
                        results.innerHTML += '<br><strong>ğŸ¯ å¯ä»¥é–‹å§‹æ¸¬è©¦ Widget åŠŸèƒ½</strong><br>';
                        results.innerHTML += 'é»æ“Šä¸Šæ–¹æŒ‰éˆ•é–‹å•Ÿè²¨å¹£è©³æƒ…é é¢ï¼Œæª¢æŸ¥ Widget æ˜¯å¦æ­£å¸¸è¼‰å…¥ã€‚';
                    } else {
                        throw new Error('TradingView è³‡æºç„¡æ³•è¨ªå•');
                    }
                })
                .catch(error => {
                    results.innerHTML += `âŒ ç³»çµ±æª¢æŸ¥å¤±æ•—: ${error.message}<br>`;
                });
        }

        // é é¢è¼‰å…¥å®Œæˆå¾Œæª¢æŸ¥ç‹€æ…‹
        window.addEventListener('load', () => {
            setTimeout(updateTestResults, 1000);
        });
    </script>
</body>
</html>