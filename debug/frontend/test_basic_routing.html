<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>基礎路由測試</title>
    <style>
        body { background: #1a1a1a; color: white; font-family: system-ui; margin: 20px; }
        .container { max-width: 600px; margin: 0 auto; }
        .test-btn { 
            display: inline-block; 
            padding: 10px 20px; 
            margin: 10px 5px; 
            background: #00d4aa; 
            color: white; 
            text-decoration: none; 
            border-radius: 6px; 
            cursor: pointer;
            border: none;
        }
        .status { margin: 20px 0; padding: 15px; background: #2a2a2a; border-radius: 6px; }
        .debug { font-family: monospace; font-size: 14px; }
    </style>
</head>
<body>
    <div class="container">
        <h1>🧭 基礎路由測試</h1>
        
        <div class="test-controls">
            <button class="test-btn" onclick="testRoute('BTCUSDT')">測試 BTC</button>
            <button class="test-btn" onclick="testRoute('ETHUSDT')">測試 ETH</button>
            <button class="test-btn" onclick="testGoHome()">回首頁</button>
        </div>
        
        <div class="status">
            <h3>測試結果：</h3>
            <div id="results" class="debug">等待測試...</div>
        </div>
        
        <div class="status">
            <h3>當前狀態：</h3>
            <div id="current-info" class="debug">
                當前 Hash: <span id="current-hash">-</span><br>
                時間: <span id="current-time">-</span>
            </div>
        </div>
    </div>

    <script>
        // 更新狀態顯示
        function updateStatus() {
            document.getElementById('current-hash').textContent = window.location.hash || '(無)';
            document.getElementById('current-time').textContent = new Date().toLocaleTimeString('zh-TW');
        }
        
        // 測試路由功能
        function testRoute(symbol) {
            const results = document.getElementById('results');
            results.innerHTML = `正在測試路由: /currency/${symbol}<br>`;
            
            try {
                // 設定 hash
                window.location.hash = `#/currency/${symbol}`;
                
                setTimeout(() => {
                    results.innerHTML += `✅ Hash 已設定: ${window.location.hash}<br>`;
                    results.innerHTML += `📍 當前 URL: ${window.location.href}<br>`;
                    
                    // 檢查頁面元素
                    const currencyPage = document.getElementById('currency-detail-page');
                    if (currencyPage) {
                        results.innerHTML += `✅ 貨幣詳情頁面容器存在<br>`;
                        const isActive = currencyPage.classList.contains('active');
                        results.innerHTML += `${isActive ? '✅' : '❌'} 頁面${isActive ? '已' : '未'}激活<br>`;
                    } else {
                        results.innerHTML += `❌ 貨幣詳情頁面容器不存在<br>`;
                    }
                    
                    results.innerHTML += `<br><strong>測試完成時間:</strong> ${new Date().toLocaleTimeString('zh-TW')}`;
                }, 500);
                
            } catch (error) {
                results.innerHTML += `❌ 測試失敗: ${error.message}<br>`;
            }
        }
        
        function testGoHome() {
            window.location.hash = '#/dashboard';
            setTimeout(() => {
                document.getElementById('results').innerHTML = '✅ 返回首頁測試完成';
            }, 300);
        }
        
        // 監聽 hash 變化
        window.addEventListener('hashchange', updateStatus);
        
        // 初始化
        updateStatus();
        setInterval(updateStatus, 1000);
        
        // 檢查必要的組件是否載入
        window.addEventListener('load', () => {
            setTimeout(() => {
                const results = document.getElementById('results');
                results.innerHTML = '🔍 檢查組件載入狀態:<br>';
                
                if (typeof Router !== 'undefined') {
                    results.innerHTML += '✅ Router 類別已載入<br>';
                } else {
                    results.innerHTML += '❌ Router 類別未載入<br>';
                }
                
                if (typeof RouteBuilder !== 'undefined') {
                    results.innerHTML += '✅ RouteBuilder 類別已載入<br>';
                } else {
                    results.innerHTML += '❌ RouteBuilder 類別未載入<br>';
                }
                
                if (typeof CurrencyDetailPage !== 'undefined') {
                    results.innerHTML += '✅ CurrencyDetailPage 類別已載入<br>';
                } else {
                    results.innerHTML += '❌ CurrencyDetailPage 類別未載入<br>';
                }
                
                results.innerHTML += '<br>✅ 組件檢查完成，可以開始測試路由功能';
            }, 1000);
        });
    </script>
</body>
</html>