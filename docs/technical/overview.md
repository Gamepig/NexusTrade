# NexusTrade æŠ€è¡“æ¶æ§‹ç¸½è¦½

## ğŸ“‹ å°ˆæ¡ˆæ¶æ§‹æ¦‚è¿°

NexusTrade æ˜¯ä¸€å€‹ç¾ä»£åŒ–çš„å…¨ç«¯åŠ å¯†è²¨å¹£äº¤æ˜“åˆ†æå¹³å°ï¼Œæ¡ç”¨ Node.js + Vanilla JavaScript æŠ€è¡“æ£§ï¼Œæä¾›å³æ™‚å¸‚å ´æ•¸æ“šã€æ™ºæ…§åƒ¹æ ¼è­¦å ±ã€AI åˆ†æå’Œ LINE é€šçŸ¥æ•´åˆã€‚

## ğŸ—ï¸ æŠ€è¡“æ£§

### å¾Œç«¯æŠ€è¡“
- **é‹è¡Œç’°å¢ƒ**: Node.js 20+ LTS
- **Web æ¡†æ¶**: Express.js 4.18+
- **è³‡æ–™åº«**: MongoDB 7.0+ with Mongoose ODM
- **å³æ™‚é€šè¨Š**: WebSocket (ws library)
- **èªè­‰ç³»çµ±**: JWT + OAuth 2.0 (Google, LINE)
- **API æ•´åˆ**: Binance API, LINE Messaging API, OpenRouter AI

### å‰ç«¯æŠ€è¡“  
- **æ ¸å¿ƒèªè¨€**: Vanilla JavaScript ES2024
- **UI æ¡†æ¶**: è‡ªå»ºçµ„ä»¶ç³»çµ±
- **åœ–è¡¨æ•´åˆ**: TradingView Widgets
- **ç‹€æ…‹ç®¡ç†**: è‡ªå»º Store ç³»çµ±
- **è·¯ç”±ç³»çµ±**: Hash-based SPA Router

### åŸºç¤è¨­æ–½
- **å®¹å™¨åŒ–**: Docker + Docker Compose
- **é€²ç¨‹ç®¡ç†**: PM2 Cluster Mode
- **åå‘ä»£ç†**: Nginx (ç”Ÿç”¢ç’°å¢ƒ)
- **ç›£æ§**: è‡ªå»ºå¥åº·æª¢æŸ¥ç³»çµ±

## ğŸ“ å°ˆæ¡ˆçµæ§‹

```
NexusTrade/
â”œâ”€â”€ src/                    # ğŸ–¥ï¸ å¾Œç«¯æºç¢¼
â”‚   â”œâ”€â”€ config/            # âš™ï¸ é…ç½®æ–‡ä»¶
â”‚   â”‚   â””â”€â”€ database.js    # MongoDB é€£æ¥é…ç½®
â”‚   â”œâ”€â”€ controllers/       # ğŸ® API æ§åˆ¶å™¨
â”‚   â”‚   â”œâ”€â”€ auth.controller.mock.js     # èªè­‰æ§åˆ¶å™¨
â”‚   â”‚   â”œâ”€â”€ market.controller.js        # å¸‚å ´æ•¸æ“šæ§åˆ¶å™¨
â”‚   â”‚   â”œâ”€â”€ oauth.controller.js         # OAuth æ§åˆ¶å™¨
â”‚   â”‚   â”œâ”€â”€ price-alert.controller.js   # åƒ¹æ ¼è­¦å ±æ§åˆ¶å™¨
â”‚   â”‚   â””â”€â”€ watchlist.controller.js     # è§€å¯Ÿæ¸…å–®æ§åˆ¶å™¨
â”‚   â”œâ”€â”€ middleware/        # ğŸ”— ä¸­ä»‹è»Ÿé«”
â”‚   â”‚   â”œâ”€â”€ auth.middleware.js          # èªè­‰ä¸­ä»‹è»Ÿé«”
â”‚   â”‚   â”œâ”€â”€ membership.middleware.js    # æœƒå“¡æ¬Šé™ä¸­ä»‹è»Ÿé«”
â”‚   â”‚   â””â”€â”€ validation.middleware.js    # è¼¸å…¥é©—è­‰ä¸­ä»‹è»Ÿé«”
â”‚   â”œâ”€â”€ models/           # ğŸ“„ è³‡æ–™æ¨¡å‹
â”‚   â”‚   â”œâ”€â”€ User.model.js              # ä½¿ç”¨è€…æ¨¡å‹
â”‚   â”‚   â”œâ”€â”€ PriceAlert.js              # åƒ¹æ ¼è­¦å ±æ¨¡å‹
â”‚   â”‚   â””â”€â”€ Watchlist.js               # è§€å¯Ÿæ¸…å–®æ¨¡å‹
â”‚   â”œâ”€â”€ routes/           # ğŸ›£ï¸ API è·¯ç”±
â”‚   â”‚   â”œâ”€â”€ auth.js                    # èªè­‰è·¯ç”±
â”‚   â”‚   â”œâ”€â”€ market.js                  # å¸‚å ´æ•¸æ“šè·¯ç”±
â”‚   â”‚   â”œâ”€â”€ notifications.js           # é€šçŸ¥è·¯ç”±
â”‚   â”‚   â””â”€â”€ watchlist.js               # è§€å¯Ÿæ¸…å–®è·¯ç”±
â”‚   â”œâ”€â”€ services/         # ğŸ”§ æ¥­å‹™é‚è¼¯æœå‹™
â”‚   â”‚   â”œâ”€â”€ binance.service.js         # Binance API æœå‹™
â”‚   â”‚   â”œâ”€â”€ line-messaging.service.js  # LINE é€šçŸ¥æœå‹™
â”‚   â”‚   â”œâ”€â”€ websocket.service.js       # WebSocket æœå‹™
â”‚   â”‚   â””â”€â”€ ai-analysis.service.js     # AI åˆ†ææœå‹™
â”‚   â””â”€â”€ server.js         # ğŸš€ æ‡‰ç”¨ç¨‹å¼å…¥å£é»
â”œâ”€â”€ public/               # ğŸŒ å‰ç«¯éœæ…‹è³‡æº
â”‚   â”œâ”€â”€ js/              # ğŸ“œ JavaScript ä»£ç¢¼
â”‚   â”‚   â”œâ”€â”€ components/  # ğŸ§© UI çµ„ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ PriceAlertModal.js     # åƒ¹æ ¼è­¦å ±æ¨¡æ…‹æ¡†
â”‚   â”‚   â”‚   â”œâ”€â”€ WatchlistPage.js       # è§€å¯Ÿæ¸…å–®é é¢
â”‚   â”‚   â”‚   â”œâ”€â”€ CurrencyDetailPage.js  # è²¨å¹£è©³æƒ…é é¢
â”‚   â”‚   â”‚   â””â”€â”€ TradingView.js         # TradingView æ•´åˆ
â”‚   â”‚   â”œâ”€â”€ lib/         # ğŸ“š æ ¸å¿ƒå‡½å¼åº«
â”‚   â”‚   â”‚   â”œâ”€â”€ api.js                 # API å®¢æˆ¶ç«¯
â”‚   â”‚   â”‚   â”œâ”€â”€ router.js              # è·¯ç”±ç³»çµ±
â”‚   â”‚   â”‚   â””â”€â”€ dom.js                 # DOM æ“ä½œå·¥å…·
â”‚   â”‚   â””â”€â”€ nexus-app-fixed.js         # ä¸»æ‡‰ç”¨ç¨‹å¼
â”‚   â”œâ”€â”€ css/             # ğŸ¨ æ¨£å¼è¡¨
â”‚   â”‚   â””â”€â”€ main.css     # ä¸»æ¨£å¼æ–‡ä»¶
â”‚   â””â”€â”€ index.html       # ğŸ“„ æ‡‰ç”¨ç¨‹å¼å…¥å£é é¢
â”œâ”€â”€ docs/                # ğŸ“š æŠ€è¡“æ–‡ä»¶
â””â”€â”€ docker-compose.yml   # ğŸ³ å®¹å™¨ç·¨æ’é…ç½®
```

## ğŸŒŠ æ•¸æ“šæµæ¶æ§‹

### å³æ™‚æ•¸æ“šæµ
```
Binance WebSocket â†’ WebSocket Service â†’ Client WebSocket â†’ UI æ›´æ–°
```

### API è«‹æ±‚æµ
```
Client â†’ Express Router â†’ Middleware â†’ Controller â†’ Service â†’ Database/External API
```

### èªè­‰æµç¨‹
```
Client â†’ OAuth Provider â†’ Callback â†’ JWT Generation â†’ Client Storage
```

## ğŸ”§ æ ¸å¿ƒè¨­è¨ˆåŸå‰‡

### 1. æ¨¡çµ„åŒ–è¨­è¨ˆ
- **åˆ†å±¤æ¶æ§‹**: æ§åˆ¶å™¨ã€æœå‹™ã€æ¨¡å‹æ¸…æ™°åˆ†é›¢
- **çµ„ä»¶åŒ–å‰ç«¯**: å¯é‡ç”¨çš„ UI çµ„ä»¶
- **æœå‹™å°å‘**: ç¨ç«‹çš„æ¥­å‹™é‚è¼¯æœå‹™

### 2. äº‹ä»¶é©…å‹•
- **WebSocket å³æ™‚æ›´æ–°**: å¸‚å ´æ•¸æ“šå³æ™‚æ¨é€
- **äº‹ä»¶ç™¼å°„å™¨**: ç³»çµ±å…§éƒ¨äº‹ä»¶é€šè¨Š
- **éé˜»å¡ I/O**: é«˜ä½µç™¼è«‹æ±‚è™•ç†

### 3. å¯æ“´å±•æ€§
- **æ°´å¹³æ“´å±•**: PM2 Cluster æ¨¡å¼
- **å®¹å™¨åŒ–**: Docker å¾®æœå‹™æ¶æ§‹
- **æ¨¡çµ„åŒ–**: æ–°åŠŸèƒ½æ˜“æ–¼é›†æˆ

### 4. å®‰å…¨æ€§å„ªå…ˆ
- **èªè­‰æˆæ¬Š**: JWT + OAuth 2.0
- **è¼¸å…¥é©—è­‰**: Mongoose Schema + è‡ªå®šç¾©é©—è­‰
- **API å®‰å…¨**: Rate Limiting + CORS + Helmet

## ğŸ“Š æ•ˆèƒ½ç‰¹è‰²

### å¾Œç«¯æ•ˆèƒ½
- **éŸ¿æ‡‰æ™‚é–“**: < 500ms (API ç«¯é»)
- **ä½µç™¼è™•ç†**: 1000+ WebSocket é€£ç·š
- **è¨˜æ†¶é«”æ•ˆç‡**: < 512MB (å–®ä¸€å¯¦ä¾‹)
- **CPU ä½¿ç”¨**: < 50% (æ­£å¸¸è² è¼‰)

### å‰ç«¯æ•ˆèƒ½
- **é¦–æ¬¡è¼‰å…¥**: < 2s (ä¸»è¦å…§å®¹)
- **è·¯ç”±åˆ‡æ›**: < 100ms (SPA å°èˆª)
- **æ•¸æ“šæ›´æ–°**: < 100ms (WebSocket å»¶é²)
- **TradingView**: æŒ‰éœ€è¼‰å…¥é¿å…é˜»å¡

## ğŸ”’ å®‰å…¨ç‰¹æ€§

### èªè­‰èˆ‡æˆæ¬Š
- **JWT Token**: ç„¡ç‹€æ…‹èªè­‰
- **OAuth 2.0**: ç¬¬ä¸‰æ–¹ç™»å…¥å®‰å…¨
- **æœƒå“¡åˆ¶åº¦**: åŸºæ–¼è§’è‰²çš„æ¬Šé™æ§åˆ¶
- **Session ç®¡ç†**: è‡ªå‹•éæœŸèˆ‡åˆ·æ–°

### è³‡æ–™ä¿è­·
- **å¯†ç¢¼é›œæ¹Š**: bcrypt with salt rounds
- **æ•æ„Ÿè³‡æ–™**: ç’°å¢ƒè®Šæ•¸å­˜å„²
- **API é‡‘é‘°**: åŠ å¯†å­˜å„²
- **HTTPS**: å¼·åˆ¶å®‰å…¨å‚³è¼¸

## ğŸ¯ æ ¸å¿ƒåŠŸèƒ½æ¨¡çµ„

### 1. å¸‚å ´æ•¸æ“šç³»çµ±
- **å³æ™‚åƒ¹æ ¼**: Binance WebSocket ä¸²æµ
- **æ­·å²æ•¸æ“š**: Kç·šåœ–è¡¨æ”¯æ´
- **å¤šäº¤æ˜“å°**: 50+ ä¸»æµåŠ å¯†è²¨å¹£
- **æ•¸æ“šå¿«å–**: Redis å¿«å–å±¤

### 2. èªè­‰ç³»çµ±
- **å¤šé‡ç™»å…¥**: Email + Google + LINE
- **æ¬Šé™æ§åˆ¶**: åŸºæ–¼æœƒå“¡ç­‰ç´š
- **Session ç®¡ç†**: JWT Token æ©Ÿåˆ¶
- **å¸³æˆ¶é€£çµ**: çµ±ä¸€ä½¿ç”¨è€…èº«ä»½

### 3. é€šçŸ¥ç³»çµ±
- **åƒ¹æ ¼è­¦å ±**: 22 ç¨®è­¦å ±é¡å‹
- **æŠ€è¡“æŒ‡æ¨™**: 18 ç¨®æŠ€è¡“æŒ‡æ¨™ç›£æ§
- **LINE æ•´åˆ**: å³æ™‚æ¨é€é€šçŸ¥
- **æœƒå“¡é™åˆ¶**: åŸºæ–¼ç­‰ç´šçš„é…é¡æ§åˆ¶

### 4. è§€å¯Ÿæ¸…å–®
- **å€‹äººåŒ–**: æ¯ç”¨æˆ¶æœ€å¤š 30 å€‹
- **å³æ™‚æ›´æ–°**: WebSocket åƒ¹æ ¼æ¨é€
- **åˆ†é¡ç®¡ç†**: å„ªå…ˆç´šèˆ‡é¡åˆ¥
- **çµ±è¨ˆåˆ†æ**: æŠ•è³‡çµ„åˆæ´å¯Ÿ

### 5. AI åˆ†æ
- **OpenRouter**: é›²ç«¯ AI åˆ†æ
- **æŠ€è¡“æŒ‡æ¨™**: è‡ªå‹•è¨ˆç®—èˆ‡è§£è®€
- **å¸‚å ´æƒ…ç·’**: æ–°èæƒ…ç·’åˆ†æ
- **è¶¨å‹¢é æ¸¬**: å¤šæ™‚é–“æ¡†æ¶åˆ†æ

## ğŸ“ˆ ç›£æ§èˆ‡ç¶­è­·

### å¥åº·æª¢æŸ¥
- **ç³»çµ±ç‹€æ…‹**: `/health` ç«¯é»
- **è³‡æ–™åº«é€£æ¥**: MongoDB é€£ç·šç‹€æ…‹
- **å¤–éƒ¨ API**: ç¬¬ä¸‰æ–¹æœå‹™å¯ç”¨æ€§
- **WebSocket**: é€£ç·šå¥åº·åº¦ç›£æ§

### æ—¥èªŒç³»çµ±
- **PM2 æ—¥èªŒ**: åˆ†é›¢çš„éŒ¯èª¤èˆ‡è¼¸å‡ºæ—¥èªŒ
- **éŒ¯èª¤è¿½è¹¤**: çµæ§‹åŒ–éŒ¯èª¤è¨˜éŒ„
- **æ•ˆèƒ½ç›£æ§**: è«‹æ±‚éŸ¿æ‡‰æ™‚é–“è¨˜éŒ„
- **å®‰å…¨å¯©è¨ˆ**: èªè­‰å¤±æ•—è¨˜éŒ„

## ğŸš€ éƒ¨ç½²ç­–ç•¥

### Docker éƒ¨ç½²
- **å¤šéšæ®µå»ºç½®**: å„ªåŒ–æ˜ åƒå¤§å°
- **ç’°å¢ƒéš”é›¢**: é–‹ç™¼ã€æ¸¬è©¦ã€ç”Ÿç”¢ç’°å¢ƒ
- **å®¹å™¨ç·¨æ’**: Docker Compose ç®¡ç†
- **æŒä¹…åŒ–**: æ•¸æ“šå·æ›è¼‰

### PM2 ç®¡ç†
- **Cluster æ¨¡å¼**: å¤šæ ¸å¿ƒåˆ©ç”¨
- **è‡ªå‹•é‡å•Ÿ**: éŒ¯èª¤æ¢å¾©æ©Ÿåˆ¶
- **é›¶åœæ©Ÿéƒ¨ç½²**: æ»¾å‹•æ›´æ–°
- **ç›£æ§æ•´åˆ**: å¯¦æ™‚æ•ˆèƒ½ç›£æ§

## ğŸ“š æ–‡ä»¶çµæ§‹

æœ¬æŠ€è¡“æ–‡ä»¶åˆ†ç‚ºä»¥ä¸‹ä¸»è¦éƒ¨åˆ†ï¼š

- **[å¾Œç«¯æ¶æ§‹](./backend/)** - è©³ç´°çš„å¾Œç«¯è¨­è¨ˆèˆ‡å¯¦ä½œ
- **[å‰ç«¯æ¶æ§‹](./frontend/)** - å‰ç«¯çµ„ä»¶èˆ‡æ¶æ§‹èªªæ˜
- **[API åƒè€ƒ](./api/)** - å®Œæ•´çš„ API ç«¯é»æ–‡ä»¶
- **[è³‡æ–™åº«è¨­è¨ˆ](./database/)** - è³‡æ–™æ¨¡å‹èˆ‡é—œä¿‚è¨­è¨ˆ
- **[å®‰å…¨æŒ‡å—](./security/)** - å®‰å…¨å¯¦ä½œèˆ‡æœ€ä½³å¯¦å‹™
- **[éƒ¨ç½²æŒ‡å—](./deployment/)** - éƒ¨ç½²èˆ‡ç¶­è­·æŒ‡å—

---

*æœ¬æ–‡ä»¶å°‡éš¨è‘—å°ˆæ¡ˆç™¼å±•æŒçºŒæ›´æ–°ï¼Œç¢ºä¿æŠ€è¡“æ¶æ§‹æ–‡ä»¶çš„æº–ç¢ºæ€§èˆ‡å®Œæ•´æ€§ã€‚*